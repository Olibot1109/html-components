<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data-Click Test</title>
</head>
<body>
    <div id="app">
        <div class="card">
            <h2>Test Component - Multiple Events</h2>

            <!-- Button with multiple events -->
            <button id="saveBtn"
                    data-click="saveUser"
                    data-mouseenter="showTooltip"
                    data-mouseleave="hideTooltip">
                Save User (hover for tooltip)
            </button>

            <!-- Input with focus/blur events -->
            <input type="text"
                   id="nameInput"
                   placeholder="Enter your name"
                   data-focus="handleFocus"
                   data-blur="handleBlur"
                   data-input="handleInput">

            <!-- Form with submit -->
            <form data-submit="handleSubmit">
                <input type="email" placeholder="Email" data-change="validateEmail">
                <button type="submit">Submit Form</button>
            </form>

            <!-- Div with mouse events -->
            <div id="hoverDiv"
                 data-mouseenter="divEnter"
                 data-mouseleave="divLeave"
                 style="padding: 20px; border: 1px solid #ccc; margin: 10px 0;">
                Hover over me!
            </div>
        </div>
    </div>

    <script src="html-components.js"></script>
    <script>
        // Register methods globally
        function saveUser(event, el, root) {
            console.log('saveUser called:');
            console.log('Event:', event.type);
            console.log('Element ID:', el.id); // "saveBtn"
            console.log('Root class:', root.className); // "card"
            alert('User saved!');
        }

        function deleteItem(event, el, root) {
            console.log('deleteItem called:');
            console.log('Element ID:', el.id);
            console.log('Root class:', root.className);
            if (confirm('Are you sure you want to delete?')) {
                alert('Item deleted!');
            }
        }

        // Register method in HTMLComponents.methods
        HTMLComponents.methods.loadData = function(event, el, root) {
            console.log('loadData called from HTMLComponents.methods:');
            console.log('Element ID:', el.id);
            console.log('Root class:', root.className);
            alert('Data loaded!');
        };

        // Multiple event handlers
        function showTooltip(event, el, root) {
            console.log('Mouse entered button - showing tooltip');
            el.title = 'Click to save user data';
        }

        function hideTooltip(event, el, root) {
            console.log('Mouse left button - hiding tooltip');
            el.title = '';
        }

        function handleFocus(event, el, root) {
            console.log('Input focused');
            el.style.border = '2px solid blue';
        }

        function handleBlur(event, el, root) {
            console.log('Input blurred');
            el.style.border = '1px solid #ccc';
        }

        function handleInput(event, el, root) {
            console.log('Input changed:', el.value);
        }

        function validateEmail(event, el, root) {
            console.log('Email validation:', el.value);
            const isValid = el.value.includes('@');
            el.style.border = isValid ? '2px solid green' : '2px solid red';
        }

        function handleSubmit(event, el, root) {
            console.log('Form submitted');
            event.preventDefault(); // Prevent actual form submission
            alert('Form submitted successfully!');
        }

        function divEnter(event, el, root) {
            console.log('Mouse entered div');
            el.style.background = '#f0f0f0';
        }

        function divLeave(event, el, root) {
            console.log('Mouse left div');
            el.style.background = 'white';
        }

        console.log('Test page loaded with multiple event handlers per element!');
        console.log('Try: clicking button, hovering button, typing in input, focusing/blurring input, hovering div');
    </script>
</body>
</html>
